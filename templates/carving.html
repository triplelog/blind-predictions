<!DOCTYPE html>

	
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Electoral Map</title>
<link rel="icon" type="image/png" href="../img/fav.png">
<meta name="description" content=""/>


<!-- Custom fonts for this template-->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">


      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
	

</head>
<body>

<!-- Page Wrapper -->
  <div id="wrapper">

    

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

      <!-- Main Content -->
      <div id="content">


        <!-- Begin Page Content -->
        <div class="container-fluid">
			<div id="mapHolder">
				
				

			
			</div>
			<input id="dSlider" type="range" min="-69" max="69" value="0" step="3"></input>
			<input id="bSlider" type="range" min="-69" max="69" value="0" step="3"></input>
		</div>

      </div>
      <!-- End of Main Content -->

      <!-- Footer 
      <footer class="sticky-footer bg-white">
        <div class="container my-auto">
          <div class="copyright text-center my-auto">
            <span>Copyright &copy; Your Website 2019</span>
          </div>
        </div>
      </footer>
       End of Footer -->
      <script></script>

    </div>
    <!-- End of Content Wrapper -->

  </div>
  <!-- End of Page Wrapper -->


  

<script>

var myWorker = new Worker('js/wasmcarving.js');


myWorker.onmessage = function(e) {
	if (e.data == "ready"){
		setTimeout(predictNow,50);
	}
	else {
		updateSVG(e.data);
	}
}
function updateNow(){
	var v = document.getElementById('dSlider').value;
	var vv = Math.pow(2.71,v/100);
	var vb = document.getElementById('bSlider').value;
	var vvb = Math.pow(2.71,vb/100);
	myWorker.postMessage(['update',vv,vvb]);
}
document.getElementById('dSlider').addEventListener('input',updateNow);
document.getElementById('bSlider').addEventListener('input',updateNow);
var svgElements = {};
function createSVG() {
	var svg = '<svg style="width: 60vw;" viewBox="-1 -1 101 101" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  version="1.2" baseProfile="tiny">';


	for (var i=0;i<100;i++){
		for (var ii=0;ii<100;ii++){
			svg += '<rect id="cell-'+i+'-'+ii+'" width="1.1" height="1.1" x="'+i+'" y="'+ii+'" style="fill: hsl(120,80%,100%);" stroke-width="0"></rect>';

		}
	}
	svg += '</svg>';
	document.getElementById('mapHolder').innerHTML = svg;
	for (var i=0;i<100;i++){
		for (var ii=0;ii<100;ii++){
			var el = document.getElementById('cell-'+i+'-'+ii);
			svgElements['cell-'+i+'-'+ii]=el;
		}
	}
}
function updateSVG(svgPoints) {


	for (var id in svgPoints){
		svgElements[id].style.fill = svgPoints[id];
	}
	
	/*var svg = '<svg style="width: 60vw;" viewBox="-1 -1 101 101" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  version="1.2" baseProfile="tiny">';

	for (var id in svgPoints){
		var i = id.split("-")[1];
		var ii = id.split("-")[2];
		svg += '<rect id="'+id+'" width="1" height="1" x="'+i+'" y="'+ii+'" style="fill: '+svgPoints[id]+'; stroke: '+svgPoints[id]+';"></rect>';

	}

	svg += '</svg>';
	document.getElementById('mapHolder').innerHTML = svg;*/
}
createSVG();
</script>


</body>

	</html>





